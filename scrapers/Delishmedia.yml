name: Delishmedia

sceneByName:
  action: scrapeXPath
  queryURL: https://delishmedia.com/?s={}
  scraper: sceneSearch

sceneByQueryFragment:
  action: scrapeXPath
  queryURL: "{url}"
  scraper: sceneScraper

xPathScrapers:
  sceneScraper:
    scene:
      Title: &title //h1
      Date: &date //td[contains(.,'Release Date:')]/following-sibling::td
      Director: &director //td[contains(.,'Director:')]/following-sibling::td
      Image: &image //meta[@property='og:image']/@content
      Studio: &studio
        Name: //td[contains(.,'Studio:')]/following-sibling::td
        URL: //td[contains(.,'Studio:')]/following-sibling::td//a/@href
      Code: //td[contains(.,'DVD ID:')]/following-sibling::td | //td[contains(.,'Content ID:')]/following-sibling::td
      Tags:
        Name: //td[contains(.,'Genre(s):')]/following-sibling::td//a
      Details: &details //tr[td[h2[@class='subhead']]]/following-sibling::tr/td/text()
      Performers:
        Name: //div[h2[contains(.,'/Idols')]]//a/text()
        Image:
          selector: //div[h2[contains(.,'/Idols')]]//img/@data-src
          postProcess:
            - replace:
                - regex: '/thumb/'
                  with: '/full/'
        URL: //div[h2[contains(.,'/Idols')]]//a/@href
      Movies:
        Name: *title
        FrontImage: *image
        Studio: *studio
        Duration: &duration
          selector: //td[contains(.,'Runtime:')]/following-sibling::td
          postProcess:
            # 1) strip out any parenthetical content, e.g. (HD: 128)
            - replace:
                - regex: '\s*\(.*?\)'
                  with: ''
            # 2) collapse multiple whitespace
            - replace:
                - regex: '\s+'
                  with: ' '
            # 3) convert “min” or “min.” to “:00”
            - replace:
                - regex: 'min\.?'
                  with: ':00'
            # 4) remove stray “HD” markers
            - replace:
                - regex: 'HD:?'
                  with: ''
            # 5) remove space before colon
            - replace:
                - regex: '\s+:'
                  with: ':'
            # 6) trim leading/trailing whitespace
            - replace:
                - regex: '^\s+|\s+$'
                  with: ''
        URL: &url //link[@rel='canonical']/@href

  movieScraper:
    common:
      $infobox: //div[@class="movietable"]/div[@class="row"][1]
    movie:
      Name: *title
      Synopsis: $infobox/div[2]/p[1]/text()
      Date:
        selector: $infobox//p[b[contains(.,'Release Date:')]]/text()
        postProcess:
          - replace:
              - regex: '\s+'
                with: ' '
          - replace:
              - regex: '^\s+|\s+$'
                with: ''
      Duration:
        selector: $infobox//p[b[contains(.,'Runtime:')]]/text()
        postProcess:
          - replace:
              - regex: '\s*\(.*?\)'
                with: ''
          - replace:
              - regex: '\s+'
                with: ' '
          - replace:
              - regex: 'min\.?'
                with: ':00'
          - replace:
              - regex: 'HD:?'
                with: ''
          - replace:
              - regex: '\s+:'
                with: ':'
          - replace:
              - regex: '^\s+|\s+$'
                with: ''
      Director: *director
      FrontImage: *image
      Studio:
        Name:
          selector: $infobox//p[b[contains(.,'Studio:')]]//a/text()
        URL:
          selector: $infobox//p[b[contains(.,'Studio:')]]//a/@href
      URL: *url

  performerScraper:
    common:
      $avatar: //div[@class='avatar-box']
    performer:
      Name:
        selector: //h1[@class='idol-name']
        postProcess:
          - replace:
              - regex: '(.+)\s*-\s*JAV\sProfile$'
                with: '$1'
      Gender:
        fixed: Female
      Image: //div[@class='idol-portrait']//img/@data-src
      Birthdate: //b[contains(.,'DOB:')]/following-sibling::a
      HairColor: //b[contains(.,'Hair Color(s):')]/following-sibling::a
      Tags:
        Name: //b[contains(.,'Tags:')]/following-sibling::a/text()
      Height:
        selector: //b[contains(.,'Height:')]/following-sibling::a
        postProcess:
          - replace:
              - regex: '[^\d]'
                with: ''
      Measurements:
        selector: //b[contains(.,'Measurements:')]/following-sibling::text()
        postProcess:
          - replace:
              - regex: '.+?[^\d-]([\d-]+)[^\d-].+'
                with: '$1'
          # remove any trailing dash
          - replace:
              - regex: '-$'
                with: ''

  sceneSearch:
    common:
      $videoPosterItem: /html/body/div[3]/div/div[2]/article/div[1]/a/div[1]/div/img/@src
      $videoItem: /html/body/div[3]/div/div[2]/article
    scene:
      Title: $videoItem/h5/text()
      URL: $videoItem/div[1]/a/@href
      Date: $videoItem/div[1]/a/div[2]/time[2]/text()
      Image: $videoPosterItem
      Tags:
        Name: $videoItem/div[2]/div/p/a[@rel='category tag']/text()
debug:
  printHTML: true
# Last Updated October 16, 2025
